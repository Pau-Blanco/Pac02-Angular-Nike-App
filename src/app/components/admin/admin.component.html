<div class="container mx-auto p-4">
  <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="max-w-lg mx-auto space-y-4">
    <h2 class="text-2xl font-bold mb-6">{{ isEditing ? 'Editar Producto' : 'Nuevo Producto' }}</h2>

    <div class="space-y-2">
      <label class="block text-sm font-medium">Nombre del Producto</label>
      <input
        type="text"
        formControlName="name"
        class="w-full p-2 border rounded-md"
        [ngClass]="{'border-red-500': productForm.get('name')?.invalid && productForm.get('name')?.touched}"
      >
      <span class="text-red-500 text-sm" *ngIf="productForm.get('name')?.invalid && productForm.get('name')?.touched">
        {{ getErrorMessage('name') }}
      </span>
    </div>

    <div class="space-y-2">
      <label class="block text-sm font-medium">Número de Serie</label>
      <input
        type="text"
        formControlName="serialNumber"
        (blur)="onSerialNumberChange()"
        class="w-full p-2 border rounded-md"
        [ngClass]="{'border-red-500': productForm.get('serialNumber')?.invalid && productForm.get('serialNumber')?.touched}"
      >
      <span class="text-red-500 text-sm" *ngIf="productForm.get('serialNumber')?.invalid && productForm.get('serialNumber')?.touched">
        {{ getErrorMessage('serialNumber') }}
      </span>
    </div>

    <div class="space-y-2">
      <label class="block text-sm font-medium">Precio</label>
      <input
        type="number"
        formControlName="price"
        class="w-full p-2 border rounded-md"
        [ngClass]="{'border-red-500': productForm.get('price')?.invalid && productForm.get('price')?.touched}"
      >
      <span class="text-red-500 text-sm" *ngIf="productForm.get('price')?.invalid && productForm.get('price')?.touched">
        {{ getErrorMessage('price') }}
      </span>
    </div>

    <div class="space-y-2">
      <label class="block text-sm font-medium">Descripción</label>
      <textarea
        formControlName="description"
        rows="4"
        class="w-full p-2 border rounded-md"
        [ngClass]="{'border-red-500': productForm.get('description')?.invalid && productForm.get('description')?.touched}"
      ></textarea>
      <span class="text-red-500 text-sm" *ngIf="productForm.get('description')?.invalid && productForm.get('description')?.touched">
        {{ getErrorMessage('description') }}
      </span>
    </div>

    <div class="space-y-2">
      <label class="block text-sm font-medium">Categoría</label>
      <select
        formControlName="category"
        class="w-full p-2 border rounded-md"
        [ngClass]="{'border-red-500': productForm.get('category')?.invalid && productForm.get('category')?.touched}"
      >
        <option value="">Selecciona una categoría</option>
        <option *ngFor="let category of categories" [value]="category">
          {{ category }}
        </option>
      </select>
      <span class="text-red-500 text-sm" *ngIf="productForm.get('category')?.invalid && productForm.get('category')?.touched">
        {{ getErrorMessage('category') }}
      </span>
    </div>

    <div class="space-y-2">
      <label class="block text-sm font-medium">Imagen del Producto</label>
      <input
        type="file"
        accept="image/*"
        (change)="onImageUpload($event)"
        class="w-full p-2 border rounded-md"
      >
    </div>

    <div class="flex items-center space-x-2">
      <input
        type="checkbox"
        formControlName="inStock"
        class="rounded"
      >
      <label class="text-sm font-medium">En Stock</label>
    </div>

    <button
      type="submit"
      class="w-full bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600 disabled:bg-gray-400"
      [disabled]="productForm.invalid"
    >
      {{ isEditing ? 'Actualizar Producto' : 'Crear Producto' }}
    </button>
  </form>
</div>